# -*-SH-*-
process TEST = {

  service = MessageLogger {
          untracked vstring destinations = {"cout"}
	  untracked vstring categories   = {"MuonIdentification", "TrackAssociator"}
	  # untracked vstring categories   = { "TrackAssociator"}
	  untracked PSet cout = {
		      # untracked string threshold = "INFO"
		      untracked string threshold = "DEBUG"
		      # untracked PSet default = { untracked int32 limit = -1  }
			untracked PSet DEBUG   = { untracked int32 limit = 0 }
			untracked PSet MuonIdentification= { untracked int32 limit = -1 }
			untracked PSet TrackAssociator = { untracked int32 limit = -1 }
		      }
           untracked vstring debugModules = { "test" }
  }
  
  source = PoolSource {
     untracked vstring fileNames = {
     # "file:/afs/cern.ch/user/d/dmytro/public/files/0_8_1-muons.root"
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1000.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1001.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1002.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1003.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1004.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1005.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1006.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1007.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1008.root",
     "file:/afs/cern.ch/user/d/dmytro/scratch0/singlemu_reco100_1009.root"
     # "file:/afs/cern.ch/user/d/dmytro/public/singlemu-1_2_0.root"
     }
     untracked int32 maxEvents = -1
     # untracked uint32 skipEvents = 150
  }
    
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
#   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
   include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

#   include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
   include "Geometry/DTGeometry/data/dtGeometry.cfi"
   include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
   include "Geometry/CSCGeometry/data/cscGeometry.cfi"
   include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
   
   module Out = PoolOutputModule 
     {
	untracked string fileName = "muons.root"
	untracked vstring outputCommands =
	          {
		  "drop *",
		  "keep *_test_*_*",
		  "keep *_g4SimHits_*_*",
		  "keep *_rsWithMaterialTracks_*_*"
		  }
     }

   module test = MuonIdProducer {
      InputTag EBRecHitCollectionLabel       = ecalRecHit:EcalRecHitsEB
      InputTag EERecHitCollectionLabel       = ecalRecHit:EcalRecHitsEE
      InputTag CaloTowerCollectionLabel      = towerMaker
      InputTag HBHERecHitCollectionLabel     = hbhereco
      InputTag HORecHitCollectionLabel       = horeco
      InputTag DTRecSegment4DCollectionLabel = dt4DSegments
      InputTag CSCSegmentCollectionLabel     = cscSegments
      
      bool useHcalRecHits = true
      bool useOldMuonMatching = false
      bool debugWithTruthMatching = true

      double minPt = 5
      double minP = 5
      double maxAbsEta = 2.5
      double maxAbsDx = 5
      double maxAbsPullX = 5
      double maxAbsDy = 9999
      double maxAbsPullY = 9999
      double ecalPreselectionCone = 0.03
      double hcalPreselectionCone = 0.05
      double muonPreselectionCone = 0.10
      
      int32 minNumberOfMatches = 2
      
      InputTag inputCollectionLabel = rsWithMaterialTracks
      string outputCollection = "muons"
    }

    path p = { test }
    endpath outpath = { Out }
}

